---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import FilteredTimeline from "../components/FilteredTimeline.astro";
import { getCollection } from "astro:content";

const raw = await getCollection("portfolio");

const entries = await Promise.all(
  raw.map(async (entry) => {
    const { Content } = await entry.render();
    return {
      ...entry,
      Content,
    };
  })
);

const tags = [...new Set(entries.flatMap(e => e.data.tags ?? []))];
---

<BaseLayout>
  <main class="p-6">
    <Hero
      name="Your Name"
      tagline="I build and automate workflows with Docker, Terraform, and Tailwind."
      intro="Welcome to my project portfolio. I specialize in backend APIs, automation, and modern web technologies."
      social={{
        github: "https://github.com/yourname",
        linkedin: "https://linkedin.com/in/yourprofile",
      }}
    />

    <FilteredTimeline entries={entries} tags={tags} />
  </main>
</BaseLayout>
