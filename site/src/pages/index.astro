---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import FilteredTimeline from "../components/FilteredTimeline.astro";
import { getCollection } from "astro:content";

const raw = await getCollection("portfolio");
raw.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

const entries = await Promise.all(
  raw.map(async (entry) => {
    const { Content } = await entry.render();
    return {
      ...entry,
      Content,
    };
  })
);

const tags = [...new Set(entries.flatMap(e => e.data.tags ?? []))];
---

<BaseLayout>
  <main class="p-6">
    <Hero
      name="Robert Bassi"
      tagline="“Turning Complexity into Maintainable Systems.”"
      intro="I specialize in designing and automating cloud infrastructure that’s scalable, secure, and easy to maintain. Whether you're deploying your first app or modernizing legacy systems, I turn complex requirements into clean, reliable solutions."
      social={{
        github: "https://github.com/rmbassi2",
        linkedin: "https://linkedin.com/in/yourprofile",
      }}
    />

    <FilteredTimeline entries={entries} tags={tags} />
  </main>
</BaseLayout>
