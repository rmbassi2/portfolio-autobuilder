---
import Timeline from './Timeline.astro';
import FilterControls from './FilterControls.jsx';

const { entries, tags } = Astro.props;

// Prepare just the tag metadata to send to the client
const entryMetadata = entries.map((e) => ({
  slug: e.slug,
  tags: e.data.tags ?? [],
}));
---
<section id="timeline" class="mt-16 max-w-5xl mx-auto px-4">
  <!-- Section Title -->
  <div class="text-center mb-10">
    <h2 class="text-3xl md:text-4xl font-bold text-secondary ">Project Timeline</h2>
    <p class="text-gray-600 dark:text-gray-400 mt-2 max-w-2xl mx-auto">
      A chronological look at the projects I've built, automated, and deployed across cloud infrastructure and web platforms.
    </p>
  </div>

  <!-- Filter Controls -->
  <FilterControls client:load entries={entryMetadata} tags={tags} />

  <!-- Timeline -->
  <Timeline entries={entries} />
</section>
